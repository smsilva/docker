name: sandbox

on:
  workflow_dispatch:

jobs:
  execution:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:          
          fetch-depth: 0
          path: repo

      - name: Runner Tests
        run: |
          DOCKER_SOCKET_FILE="/var/run/docker.sock"
          DOCKER_SOCKET_GID=$(stat -c %g ${DOCKER_SOCKET_FILE?})

          getent passwd

          cat <<EOF
          DOCKER_SOCKET_FILE.: ${DOCKER_SOCKET_FILE}
          DOCKER_SOCKET_GID..: ${DOCKER_SOCKET_GID}
          GITHUB_WORKSPACE...: ${GITHUB_WORKSPACE}
          PWD................: ${PWD}
          EOF

          echo 

          echo "Files at $PWD:"
          find $PWD

          echo ""

          echo "Test runner:"
          repo/runner/run silviosilva/runner:22.04-local hello
